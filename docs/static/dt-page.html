<!DOCTYPE html>
<html>
<head>

  <title>DT document</title>

  <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="/static/jsonview.bundle.css">
  <link rel="stylesheet" href="https://cdn.rawgit.com/Chalarangelo/mini.css/v3.0.1/dist/mini-default.min.css">
  <meta name="viewport" content="width=device-width, initial-scale=1">

</head>
<body>

  <h1>DT document for <span id="name"></span></h1>
  
  <p>DT identifier: <a id="dt-id" href=""></a></p>
  
  <p>You can download the raw <a href="index.json">JSON</a> and <a href="index.yaml">YAML</a> files.</p>
  
  <p>Browse the DT document below by clicking the arrows.</p> 

  <script>

    fetch('index.json')
    .then(response => response.json())
    .then(data => {
	  document.getElementById('name').innerHTML = data.name;
	  document.getElementById('dt-id').href = data['dt-id'];
	  document.getElementById('dt-id').innerHTML = data['dt-id'];
    })

  </script>

  <div class="root"></div>

  <script type="text/javascript" src="/static/jsonview.bundle.js"></script>
  <script type="text/javascript">
    fetch('index.json')
    .then((res)=> {
      return res.text();
    })
    .then((data) => {
      const tree = JsonView.createTree(data);
      JsonView.render(tree, document.querySelector('.root'));
      // JsonView.expandChildren(tree);
	  JsonView.showNodeChildren(tree);
    })
    .catch((err) => {
      console.log(err);
    })

  </script>

  <footer>
    <p>The source code can be found from the <a href="https://github.com/juusoautiosalo/twinrepo-test">GitHub repository</a></p>
  </footer>

</body>
</html>
